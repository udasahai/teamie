{"changed":false,"filter":false,"title":"create.sql","tooltip":"/create.sql","value":"DROP TABLE IF EXISTS user_type_total;\nDROP TABLE IF EXISTS track;\n\nCREATE TABLE IF NOT EXISTS track (\n    id int NOT NULL AUTO_INCREMENT PRIMARY KEY, \n    site_id varchar(50) NOT NULL,\n    user_id int NOT NULL, \n    tracking_type varchar(50),\n    entity_type varchar(50),\n    entity_id int, \n    group_id int, \n    page_title varchar(250),\n    page_url varchar(500),\n    timestamp int, \n    client_type varchar(20), \n    client_id varchar(20),\n    client_name varchar(20), \n    client_version varchar(20),\n    ip_address varchar(50),\n    user_agent varchar(250),\n    data JSON\n);\n\n\n\nCREATE TABLE IF NOT EXISTS user_type_total (\n    site_id varchar(50) NOT NULL,\n    user_id int NOT NULL, \n    tracking_type varchar(50) NOT NULL, \n    total_time int DEFAULT 0, \n    last_track_id int,\n    PRIMARY KEY(user_id, site_id, tracking_type), \n    FOREIGN KEY(last_track_id) REFERENCES track(id)\n);\n\n\n\n\n-- SELECT track.id, user_type_total.total_time FROM track, user_type_total\n--              WHERE (track.id ,user_type_total.total_time) = (\n--                  SELECT last_track_id, total_time FROM user_type_total\n--                  WHERE site_id = 'demo.theteamie.com' and user_id = 243 and tracking_type = 'lesson_view')","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1584767822707}